---
alwaysApply: true
---
# 需求开发规则（AI版本）

## 四步工作法

### 1️⃣ 技术调研（必须真实搜索）
**要求**：必须使用 `web_search` 工具进行真实搜索

- 搜索5次国外关键词 + 5次国内关键词
- 关键词组合：`[需求名] + best practice/implementation/design pattern`
- **提取并记录**：
  - 核心概念（3-5个关键概念）
  - 常见实现方案（至少2种）
  - 性能指标或注意事项
  - 真实的参考链接

**禁止**：编造文章标题、作者、链接

### 2️⃣ 参考实现研究
**要求**：搜索真实的开源项目实现

- 搜索 `Sentry [需求名] source code GitHub` 或类似项目
- 搜索 `[需求名] implementation blog tutorial`
- **提取并记录**：
  - 关键设计模式名称
  - 核心API设计思路
  - 实现中的坑点和最佳实践

**禁止**：假装读过源码，编造实现细节

### 3️⃣ 本地代码分析（AI擅长）
**要求**：使用 `read_file` 等工具真实阅读代码

- 列出相关的现有文件
- 分析现有架构如何支持新需求
- 识别可复用的类/接口/工具
- 识别约束条件和改动范围

### 4️⃣ 方案设计（AI擅长）
**要求**：基于前3步的真实信息

- 提出至少2个技术方案
- 用表格对比优缺点
- 明确推荐方案 + 3个理由
- 给出核心代码示例（伪代码或真实代码）
- 设计测试策略

## 最终交付格式

```markdown
# [需求名] 设计方案

## 调研总结
- 搜索关键词：xxx
- 核心概念：
  1. 概念A（来源：链接）
  2. 概念B（来源：链接）
- 常见方案：方案1、方案2

## 参考实现
- Sentry实现思路：xxx（搜索来源：链接）
- 关键设计模式：xxx
- 注意事项：xxx

## 本地架构分析
- 现有文件：packages/core/src/xxx.ts
- 可复用：Integration接口、EventPipeline
- 约束：必须兼容现有生命周期

## 方案对比
| 方案 | 优点 | 缺点 | 复杂度 |
|-----|------|------|-------|
| A   |      |      |       |
| B   |      |      |       |

## 推荐方案：A
理由：
1. xxx
2. xxx
3. xxx

## 核心实现
\`\`\`typescript
// 关键代码
\`\`\`

## 测试策略
- 单元测试：xxx
- 集成测试：xxx
```

## AI能力边界说明

**AI能做的**：
- ✅ 使用web_search真实搜索
- ✅ 提取搜索结果的关键信息
- ✅ 读取和分析本地代码
- ✅ 设计技术方案和对比
- ✅ 生成代码示例

**AI做不到的**：
- ❌ 像人类一样深度阅读完整文章
- ❌ 逐行研究GitHub仓库的所有代码
- ❌ 理解超出搜索结果之外的隐含知识

**因此**：
- 方案基于搜索到的真实信息
- 承认信息的局限性
- 如需深度研究，建议人工补充